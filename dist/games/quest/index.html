<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –∫–≤–µ—Å—Ç</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            touch-action: manipulation;
            font-family: 'Comic Sans MS', cursive, Arial, sans-serif;
            background: linear-gradient(135deg, #ffffff 0%, #fad0c4 100%);
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        #game-container {
            position: relative;
            width: 90%;
            max-width: 500px;
            height: 60vh;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            align-content: space-around;
        }
        
        .item {
            width: 22%;
            aspect-ratio: 1/1;
            margin: 5px;
            background: white;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            user-select: none;
        }
        
        .item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }
        
        .item.active {
            background: #ff6b6b;
            color: white;
            transform: scale(0.95);
        }
        
        #info-panel {
            width: 100%;
            padding: 15px 0;
            background: rgba(255, 255, 255, 0.7);
            display: flex;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        #level {
            color: #333;
        }
        
        #message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            z-index: 100;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 3px solid #ff6b6b;
            max-width: 80%;
        }
        
        #message h2 {
            color: #ff6b6b;
            font-size: 2rem;
            margin: 0 0 15px 0;
            text-shadow: 2px 2px 0 rgba(255, 255, 255, 0.5);
        }
        
        #message p {
            color: #555;
            font-size: 1.2rem;
            margin: 0 0 20px 0;
        }
        
        #restart-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 30px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Comic Sans MS', cursive;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        #restart-btn:hover {
            background: #ff8e8e;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease-in-out;
        }
        
        #countdown {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5rem;
            font-weight: bold;
            color: #ff6b6b;
            text-shadow: 3px 3px 0 rgba(255, 255, 255, 0.5);
            z-index: 200;
            display: none;
        }
    </style>
</head>
<body>
    <h1>–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –∫–≤–µ—Å—Ç</h1>
    <div id="info-panel">
        <div>–£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span>/<span id="max-level">5</span></div>
    </div>
    <div id="game-container"></div>
    <div id="message">
        <h2 id="message-title"></h2>
        <p id="message-text"></p>
        <button id="restart-btn"></button>
    </div>
    <div id="countdown">3</div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã
        const config = {
            items: ['üéÅ', 'üéÑ', 'üéÖ', 'üåü', 'üîî', '‚õÑ', 'ü¶å', 'üç™'],
            initialSequenceLength: 2,
            maxLevel: 5,
            showTime: 1000,
            hideTime: 500,
            levelUpStep: 1,
            countdownTime: 3
        };
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let state = {
            level: 1,
            sequence: [],
            playerSequence: [],
            isShowing: false,
            isGameOver: false
        };
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const gameContainer = document.getElementById('game-container');
        const levelEl = document.getElementById('level');
        const maxLevelEl = document.getElementById('max-level');
        const messageEl = document.getElementById('message');
        const messageTitleEl = document.getElementById('message-title');
        const messageTextEl = document.getElementById('message-text');
        const restartBtn = document.getElementById('restart-btn');
        const countdownEl = document.getElementById('countdown');
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
        maxLevelEl.textContent = config.maxLevel;
        
        // –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
        function startCountdown(callback) {
            let count = config.countdownTime;
            countdownEl.style.display = 'block';
            countdownEl.textContent = count;
            
            const timer = setInterval(() => {
                count--;
                countdownEl.textContent = count;
                
                if (count <= 0) {
                    clearInterval(timer);
                    countdownEl.style.display = 'none';
                    callback();
                }
            }, 1000);
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            state.level = 1;
            state.isGameOver = false;
            
            levelEl.textContent = state.level;
            messageEl.style.display = 'none';
            
            createItems();
            
            startCountdown(() => {
                startRound();
            });
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        function createItems() {
            gameContainer.innerHTML = '';
            
            const shuffledItems = [...config.items].sort(() => 0.5 - Math.random());
            const selectedItems = shuffledItems.slice(0, 8);
            
            selectedItems.forEach((item, index) => {
                const itemEl = document.createElement('div');
                itemEl.className = 'item';
                itemEl.textContent = item;
                itemEl.dataset.index = index;
                itemEl.addEventListener('click', handleItemClick);
                gameContainer.appendChild(itemEl);
            });
        }
        
        // –ù–∞—á–∞–ª–æ —Ä–∞—É–Ω–¥–∞
        function startRound() {
            state.sequence = [];
            state.playerSequence = [];
            
            const items = document.querySelectorAll('.item');
            for (let i = 0; i < config.initialSequenceLength + (state.level - 1) * config.levelUpStep; i++) {
                const randomIndex = Math.floor(Math.random() * items.length);
                state.sequence.push(randomIndex);
            }
            
            showSequence(0);
        }
        
        // –ü–æ–∫–∞–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        function showSequence(index) {
            if (index >= state.sequence.length) {
                state.isShowing = false;
                return;
            }
            
            state.isShowing = true;
            const itemIndex = state.sequence[index];
            const item = document.querySelector(`.item[data-index="${itemIndex}"]`);
            
            item.classList.add('active', 'pulse');
            
            setTimeout(() => {
                item.classList.remove('active', 'pulse');
                
                setTimeout(() => {
                    showSequence(index + 1);
                }, config.hideTime);
            }, config.showTime);
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É
        function handleItemClick(e) {
            if (state.isShowing || state.isGameOver) return;
            
            const itemIndex = parseInt(e.target.dataset.index);
            e.target.classList.add('active', 'pulse');
            
            setTimeout(() => {
                e.target.classList.remove('active', 'pulse');
            }, 300);
            
            state.playerSequence.push(itemIndex);
            
            if (state.playerSequence[state.playerSequence.length - 1] !== 
                state.sequence[state.playerSequence.length - 1]) {
                endGame(false);
                return;
            }
            
            if (state.playerSequence.length === state.sequence.length) {
                if (state.level >= config.maxLevel) {
                    endGame(true);
                    return;
                }
                
                state.level++;
                levelEl.textContent = state.level;
                
                if (state.level % 3 === 0) {
                    createItems();
                }
                
                startCountdown(() => {
                    startRound();
                });
            }
        }
        
        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
        function endGame(isWin) {
            state.isGameOver = true;
            
            if (isWin) {
                messageTitleEl.textContent = 'üßê –ê —Ç–µ–ø–µ—Ä—å –ø–æ–¥—É–º–∞–π';
                messageTextEl.textContent = `—Ç—É—Ç –∑–∞–≥–∞–¥–∫–∞`;
                restartBtn.style.display = `none`;
            } else {
                messageTitleEl.textContent = '–£–ø—Å!';
                messageTextEl.textContent = `–ù–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë!`;
                restartBtn.textContent = `–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞`;
            }
            
            messageEl.style.display = 'block';
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–∞
        restartBtn.addEventListener('click', initGame);
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        document.addEventListener('DOMContentLoaded', () => {
            document.body.style.margin = '0';
            document.body.style.overflow = 'hidden';
            document.documentElement.style.overflow = 'hidden';
            
            initGame();
        });
    </script>
</body>
</html>