<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–õ–∞–±–∏—Ä–∏–Ω—Ç —Å –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è!</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            touch-action: none;
            background: #f0f8ff;
            font-family: Arial, sans-serif;
        }
        #game {
            display: block;
            margin: 0 auto;
            background: #e6f7ff;
        }
        #win-message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 215, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 100;
        }
    </style>
</head>
<body>
    <canvas id="game"></canvas>
    <div id="win-message">
        <h1>–ü–æ–∑–¥—Ä–∞–≤–ª—è—é!</h1>
        <p>–¢—ã –ø—Ä–æ—à—ë–ª –ª–∞–±–∏—Ä–∏–Ω—Ç! üéÇ</p>
    </div>

    <script>
        const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const winMessage = document.getElementById('win-message');

// –†–∞–∑–º–µ—Ä—ã —Ö–æ–ª—Å—Ç–∞
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
const ball = {
    x: 50,
    y: 50,
    radius: 15,
    color: '#FF6B6B',
    speed: 0,
    vx: 0,
    vy: 0
};

const hole = {
    x: canvas.width - 60,
    y: canvas.height - 60,
    radius: 25,
    color: '#4ECDC4'
};

const obstacles = [
    { x: 150, y: 0, width: 30, height: 300 },
    { x: 400, y: 140, width: 30, height: 320 },
    { x: 100, y: 460, width: 450, height: 30 },
    { x: 0, y: 600, width: 650, height: 30 },
    { x: 400, y: 120, width: 150, height: 30 }

];

let isGameOver = false;
let isWin = false;

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–∞–∫–ª–æ–Ω —Ç–µ–ª–µ—Ñ–æ–Ω–∞
window.addEventListener('deviceorientation', handleOrientation);
// –î–ª—è –ü–ö/–µ—Å–ª–∏ –Ω–µ—Ç –≥–∏—Ä–æ—Å–∫–æ–ø–∞ ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–µ–ª–∫–∞–º–∏
window.addEventListener('keydown', handleKeyDown);

// –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–≤–∞–π–ø–æ–≤
let touchStartX = 0;
let touchStartY = 0;

canvas.addEventListener('touchstart', (e) => {
    touchStartX = e.touches[0].clientX;
    touchStartY = e.touches[0].clientY;
});

canvas.addEventListener('touchmove', (e) => {
    if (isGameOver || isWin) return;
    e.preventDefault();
    const touchX = e.touches[0].clientX;
    const touchY = e.touches[0].clientY;
    
    ball.vx = (touchX - touchStartX) * 0.1;
    ball.vy = (touchY - touchStartY) * 0.1;
});

function handleOrientation(e) {
    if (isGameOver || isWin) return;
    // gamma ‚Äî –Ω–∞–∫–ª–æ–Ω –≤–ª–µ–≤–æ-–≤–ø—Ä–∞–≤–æ, beta ‚Äî –≤–ø–µ—Ä–µ–¥-–Ω–∞–∑–∞–¥
    ball.vx = e.gamma * 0.2;
    ball.vy = e.beta * 0.2;
}

function handleKeyDown(e) {
    if (isGameOver || isWin) return;
    const speed = 5;
    switch(e.key) {
        case 'ArrowLeft': ball.vx = -speed; break;
        case 'ArrowRight': ball.vx = speed; break;
        case 'ArrowUp': ball.vy = -speed; break;
        case 'ArrowDown': ball.vy = speed; break;
    }
}

function update() {
    if (isGameOver || isWin) return;
    
    // –î–≤–∏–∂–µ–Ω–∏–µ —à–∞—Ä–∏–∫–∞
    ball.x += ball.vx;
    ball.y += ball.vy;
    
    // –¢—Ä–µ–Ω–∏–µ (–∑–∞–º–µ–¥–ª–µ–Ω–∏–µ)
    ball.vx *= 0.98;
    ball.vy *= 0.98;
    
    // –ì—Ä–∞–Ω–∏—Ü—ã —ç–∫—Ä–∞–Ω–∞
    if (ball.x < ball.radius) ball.x = ball.radius;
    if (ball.x > canvas.width - ball.radius) ball.x = canvas.width - ball.radius;
    if (ball.y < ball.radius) ball.y = ball.radius;
    if (ball.y > canvas.height - ball.radius) ball.y = canvas.height - ball.radius;
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π —Å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏
    for (const obs of obstacles) {
        if (
            ball.x + ball.radius > obs.x &&
            ball.x - ball.radius < obs.x + obs.width &&
            ball.y + ball.radius > obs.y &&
            ball.y - ball.radius < obs.y + obs.height
        ) {
            // –®–∞—Ä–∏–∫ —É–ø–∞–ª –≤ —è–º—É? (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ø—Ä–æ–≤–µ—Ä–æ–∫)
            isGameOver = true;
            setTimeout(resetGame, 1000);
        }
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã (–¥–æ—Å—Ç–∏–≥ –¥—ã—Ä–∫–∏)
    const distanceToHole = Math.sqrt(
        Math.pow(ball.x - hole.x, 2) + Math.pow(ball.y - hole.y, 2)
    );
    if (distanceToHole < ball.radius + hole.radius) {
        isWin = true;
        winMessage.style.display = 'block';
    }
}

function draw() {
    // –û—á–∏—Å—Ç–∫–∞ —ç–∫—Ä–∞–Ω–∞
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // –†–∏—Å—É–µ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
    ctx.fillStyle = '#888';
    for (const obs of obstacles) {
        ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
    }
    
    // –†–∏—Å—É–µ–º "–¥—ã—Ä–∫—É" (—Ñ–∏–Ω–∏—à)
    ctx.beginPath();
    ctx.arc(hole.x, hole.y, hole.radius, 0, Math.PI * 2);
    ctx.fillStyle = hole.color;
    ctx.fill();
    
    // –†–∏—Å—É–µ–º —à–∞—Ä–∏–∫
    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
    ctx.fillStyle = ball.color;
    ctx.fill();
    
    if (isGameOver) {
        ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#FFF';
        ctx.font = '30px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('–£–ø—Å! –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑!', canvas.width / 2, canvas.height / 2);
    }
}

function resetGame() {
    ball.x = 50;
    ball.y = 50;
    ball.vx = 0;
    ball.vy = 0;
    isGameOver = false;
    isWin = false;
    winMessage.style.display = 'none';
}

function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

gameLoop();

// –†–µ—Å–∞–π–∑ –ø—Ä–∏ –ø–æ–≤–æ—Ä–æ—Ç–µ —ç–∫—Ä–∞–Ω–∞
window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});
    </script>
</body>
</html>