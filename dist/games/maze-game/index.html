<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–ü–æ–∑–¥—Ä–∞–≤–ª—è—Ç–µ–ª—å–Ω—ã–π –õ–∞–±–∏—Ä–∏–Ω—Ç</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            touch-action: none;
            background: linear-gradient(135deg, #4e78ff 0%, #590083 100%);
            font-family: 'Comic Sans MS', cursive;
        }
        #game {
            display: block;
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }
        #win-message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            z-index: 100;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 3px solid #ff6b6b;
            max-width: 80%;
        }
        #win-message h1 {
            color: #ff6b6b;
            font-size: 2.5rem;
            margin: 0 0 15px 0;
            text-shadow: 2px 2px 0 rgba(255, 255, 255, 0.5);
        }
        #win-message p {
            color: #555;
            font-size: 1.5rem;
            margin: 0 0 20px 0;
        }
        #restart-btn {
            visibility: hidden;
            margin: 0%;
            padding: 0%;
        }
        #controls-hint {
            position: fixed;
            bottom: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            color: white;
            font-size: 1.2rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            pointer-events: none;
        }
    </style>
</head>
<body>
    <canvas id="game"></canvas>
    <div id="win-message">
        <h1>üßê –ê —Ç–µ–ø–µ—Ä—å –ø–æ–¥—É–º–∞–π</h1>
        <p>—Ç—É—Ç –∑–∞–≥–∞–¥–∫–∞</p>
        <button id="restart-btn"></button>
    </div>
    <div id="controls-hint">–ù–∞–∫–ª–æ–Ω—è–π —Ç–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è!</div>

    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        const winMessage = document.getElementById('win-message');
        const restartBtn = document.getElementById('restart-btn');

        // –†–∞–∑–º–µ—Ä—ã —Ö–æ–ª—Å—Ç–∞
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        const ball = {
            x: 50,
            y: 50,
            radius: 35,
            color: '#FF6B6B',
            vx: 0,
            vy: 0
        };

        const hole = {
            x: canvas.width - 80,
            y: canvas.height - 80,
            radius: 30,
            color: '#4ECDC4'
        };

        const obstacles = [
            { x: 150, y: 0, width: 40, height: 300 },
            { x: 100, y: 460, width: 450, height: 40 },
            { x: 400, y: 140, width: 40, height: 280 },
            { x: 0, y: 800, width: 550, height: 40 },
            { x: 250, y: 660, width: 40, height: 110 },
            { x: 470, y: 120, width: 80, height: 40 },
            { x: 600, y: 290, width: 160, height: 50 },
            { x: 750, y: 0, width: 40, height: 900 },
            { x: 530, y: 460, width: 40, height: 200 },

            { x: 150, y: 0+1000, width: 140, height: 300 },
            { x: 130, y: 460+1000, width: 440, height: 40 },
            { x: 400, y: 140+1000, width: 40, height: 360 },
            { x: 0, y: 800+1000, width: 550, height: 40 },
            { x: 250, y: 680+1000, width: 40, height: 80 },
            { x: 400, y: 120+1000, width: 150, height: 40 },
            { x: 600, y: 290+1000, width: 1160, height: 50 },
            { x: 530, y: 460+1000, width: 40, height: 200 }

        ];

        let isGameOver = false;
        let isWin = false;

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–∞–∫–ª–æ–Ω —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        window.addEventListener('deviceorientation', handleOrientation);
        // –î–ª—è –ü–ö/–µ—Å–ª–∏ –Ω–µ—Ç –≥–∏—Ä–æ—Å–∫–æ–ø–∞ ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–µ–ª–∫–∞–º–∏
        window.addEventListener('keydown', handleKeyDown);

        // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–≤–∞–π–ø–æ–≤
        let touchStartX = 0;
        let touchStartY = 0;

        canvas.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        });

        canvas.addEventListener('touchmove', (e) => {
            if (isGameOver || isWin) return;
            e.preventDefault();
            const touchX = e.touches[0].clientX;
            const touchY = e.touches[0].clientY;
            
            ball.vx = (touchX - touchStartX) * 0.1;
            ball.vy = (touchY - touchStartY) * 0.1;
        });

        function handleOrientation(e) {
            if (isGameOver || isWin) return;
            // gamma ‚Äî –Ω–∞–∫–ª–æ–Ω –≤–ª–µ–≤–æ-–≤–ø—Ä–∞–≤–æ, beta ‚Äî –≤–ø–µ—Ä–µ–¥-–Ω–∞–∑–∞–¥
            ball.vx = e.gamma * 0.2;
            ball.vy = e.beta * 0.2;
        }

        function handleKeyDown(e) {
            if (isGameOver || isWin) return;
            const speed = 5;
            switch(e.key) {
                case 'ArrowLeft': ball.vx = -speed; break;
                case 'ArrowRight': ball.vx = speed; break;
                case 'ArrowUp': ball.vy = -speed; break;
                case 'ArrowDown': ball.vy = speed; break;
            }
        }

        function update() {
            if (isGameOver || isWin) return;
            
            // –î–≤–∏–∂–µ–Ω–∏–µ —à–∞—Ä–∏–∫–∞
            ball.x += ball.vx;
            ball.y += ball.vy;
            
            // –¢—Ä–µ–Ω–∏–µ (–∑–∞–º–µ–¥–ª–µ–Ω–∏–µ)
            ball.vx *= 0.95;
            ball.vy *= 0.95;
            
            // –ì—Ä–∞–Ω–∏—Ü—ã —ç–∫—Ä–∞–Ω–∞
            if (ball.x < ball.radius) ball.x = ball.radius;
            if (ball.x > canvas.width - ball.radius) ball.x = canvas.width - ball.radius;
            if (ball.y < ball.radius) ball.y = ball.radius;
            if (ball.y > canvas.height - ball.radius) ball.y = canvas.height - ball.radius;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π —Å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏
            for (const obs of obstacles) {
                if (
                    ball.x + ball.radius > obs.x &&
                    ball.x - ball.radius < obs.x + obs.width &&
                    ball.y + ball.radius > obs.y &&
                    ball.y - ball.radius < obs.y + obs.height
                ) {
                    isGameOver = true;
                    setTimeout(resetGame, 1000);
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã (–¥–æ—Å—Ç–∏–≥ –¥—ã—Ä–∫–∏)
            const distanceToHole = Math.sqrt(
                Math.pow(ball.x - hole.x, 2) + Math.pow(ball.y - hole.y, 2)
            );
            if (distanceToHole < ball.radius + hole.radius) {
                isWin = true;
                winMessage.style.display = 'block';
                restartBtn.style.display = 'none';
            }
        }

        function draw() {
            // –û—á–∏—Å—Ç–∫–∞ —ç–∫—Ä–∞–Ω–∞
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // –†–∏—Å—É–µ–º —Ñ–æ–Ω
            ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // –†–∏—Å—É–µ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è —Å —Ç–µ–Ω—å—é
            ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';
            ctx.shadowBlur = 10;
            ctx.shadowOffsetY = 5;
            ctx.fillStyle = '#FF9EB5';
            for (const obs of obstacles) {
                // –°–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã
                const cornerRadius = 10;
                ctx.beginPath();
                ctx.moveTo(obs.x + cornerRadius, obs.y);
                ctx.lineTo(obs.x + obs.width - cornerRadius, obs.y);
                ctx.quadraticCurveTo(obs.x + obs.width, obs.y, obs.x + obs.width, obs.y + cornerRadius);
                ctx.lineTo(obs.x + obs.width, obs.y + obs.height - cornerRadius);
                ctx.quadraticCurveTo(obs.x + obs.width, obs.y + obs.height, obs.x + obs.width - cornerRadius, obs.y + obs.height);
                ctx.lineTo(obs.x + cornerRadius, obs.y + obs.height);
                ctx.quadraticCurveTo(obs.x, obs.y + obs.height, obs.x, obs.y + obs.height - cornerRadius);
                ctx.lineTo(obs.x, obs.y + cornerRadius);
                ctx.quadraticCurveTo(obs.x, obs.y, obs.x + cornerRadius, obs.y);
                ctx.closePath();
                ctx.fill();
            }
            ctx.shadowColor = 'transparent';
            
            // –†–∏—Å—É–µ–º "–¥—ã—Ä–∫—É" (—Ñ–∏–Ω–∏—à) —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
            const holeGradient = ctx.createRadialGradient(
                hole.x, hole.y, 0,
                hole.x, hole.y, hole.radius
            );
            holeGradient.addColorStop(0, '#88E8F0');
            holeGradient.addColorStop(1, '#4ECDC4');
            ctx.beginPath();
            ctx.arc(hole.x, hole.y, hole.radius, 0, Math.PI * 2);
            ctx.fillStyle = holeGradient;
            ctx.fill();
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–≤–µ—á–µ–Ω–∏–µ
            ctx.shadowColor = '#4ECDC4';
            ctx.shadowBlur = 20;
            ctx.fill();
            ctx.shadowColor = 'transparent';
            
            // –†–∏—Å—É–µ–º —à–∞—Ä–∏–∫ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
            const ballGradient = ctx.createRadialGradient(
                ball.x, ball.y, 0,
                ball.x, ball.y, ball.radius
            );
            ballGradient.addColorStop(0, '#FF8E8E');
            ballGradient.addColorStop(1, '#FF6B6B');
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            ctx.fillStyle = ballGradient;
            ctx.fill();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –±–ª–∏–∫ –Ω–∞ —à–∞—Ä–∏–∫
            ctx.beginPath();
            ctx.arc(ball.x - ball.radius/3, ball.y - ball.radius/3, ball.radius/4, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.fill();
            
            if (isGameOver) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#FFF';
                ctx.font = 'bold 36px "Comic Sans MS"';
                ctx.textAlign = 'center';
                ctx.fillText('–ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑!', canvas.width / 2, canvas.height / 2);
            }
        }

        function resetGame() {
            ball.x = 50;
            ball.y = 50;
            ball.vx = 0;
            ball.vy = 0;
            isGameOver = false;
            isWin = false;
            winMessage.style.display = 'none';
        }

        restartBtn.addEventListener('click', resetGame);

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        gameLoop();

        // –†–µ—Å–∞–π–∑ –ø—Ä–∏ –ø–æ–≤–æ—Ä–æ—Ç–µ —ç–∫—Ä–∞–Ω–∞
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            hole.x = canvas.width - 80;
            hole.y = canvas.height - 80;
        });
    </script>
</body>
</html>
